---
import Layout from "../layouts/Layout.astro";
import PromptCard from "../components/PromptCard.astro";
import ButtonPrimary from "../components/ButtonPrimary.astro";
import { getPublicPrompts } from "../data/prompts";

const allPrompts = await getPublicPrompts();
const recentPrompts = allPrompts.slice(0, 5);
---

<Layout
  title="My Prompt Library"
  description="A curated, Git-native library of structured prompts for sovereign AI workflows."
>
  <section class="mb-12">
    <h1 class="text-3xl font-bold tracking-tight text-[var(--color-foreground)] sm:text-4xl">
      My Prompt Library
    </h1>
    <p class="mt-3 max-w-xl text-[0.98rem] sm:text-lg leading-relaxed text-[var(--color-muted)]">
      Plain-text prompts in Markdown, stored in Git. Easy to read, copy, and adapt in your own
      tools. No lock-in.
    </p>
    <p class="mt-6">
      <ButtonPrimary href="/prompts/"> Browse prompts </ButtonPrimary>
    </p>
  </section>

  {
    recentPrompts.length > 0 && (
      <section aria-labelledby="recent-heading" class="mt-10">
        <h2 id="recent-heading" class="mb-4 text-lg font-semibold text-[var(--color-foreground)]">
          Recent prompts
        </h2>
        <ul class="list-none space-y-3 p-0">
          {recentPrompts.map((entry) => (
            <li>
              <PromptCard entry={entry} />
            </li>
          ))}
        </ul>
        <p class="mt-4">
          <a
            href="/prompts/"
            class="text-sm text-[var(--color-accent)] no-underline hover:underline focus-visible:underline"
          >
            View all prompts â†’
          </a>
        </p>
      </section>
    )
  }
</Layout>
